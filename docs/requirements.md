 
 
# 상점 통합 관리 시스템 요구사항 명세서

## 1. 프로젝트 개요
- **프로젝트명**: QR 테이블 주문 관리 시스템
- **목적**: T오더와 유사한 QR 기반 주문 및 상점 통합 관리
- **개발기간**: 2025.08.21 ~ 2025.09.10 (21일)
- **기술스택**: Node.js + React + React Native + PostgreSQL

## 2. 시스템 구성
- **사장 웹**: 상점/메뉴 관리, 주문 현황, QR 생성
- **직원 앱**: 주문 알림, 상태 변경, 주문 처리
- **손님 웹**: QR 스캔, 메뉴 조회, 주문 생성

## 3. 핵심 데모 시나리오 (면접 시연용)

### 3.1 시나리오 1: QR 주문 플로우
**목표**: QR 스캔부터 주문 완료까지 매끄러운 사용자 경험

**사전 조건**:
- 사장이 상점 "맛집카페" 등록 완료
- 메뉴 5개 이상 등록 (아메리카노 4000원, 라떼 4500원 등)
- 테이블 4개 생성 및 QR 코드 발급

**시나리오 단계**:
1. 손님이 1번 테이블 QR 코드를 스마트폰으로 스캔
2. 손님 웹 자동 접속 (URL: `/customer?store=1&table=1&token=abc123`)
3. 매장명 "맛집카페", 테이블 "1번" 자동 확인
4. 메뉴 목록 확인 (가격, 품절 여부 실시간 표시)
5. 아메리카노 2잔, 라떼 1잔 선택하여 장바구니 담기
6. 총 금액 12500원 확인 후 "주문하기" 버튼 클릭
7. 요청사항 "얼음 적게" 입력
8. 주문 완료 화면 및 주문번호 "#001" 표시

**성공 기준**:
- QR 스캔부터 주문 완료까지 3분 이내
- 모바일 브라우저에서 매끄러운 UI/UX
- 중복 주문 방지 (멱등성 키 적용)
- 주문 내역 정확성 100%

### 3.2 시나리오 2: 실시간 주문 알림 및 처리
**목표**: 주문 발생 시 직원 즉시 대응 가능

**사전 조건**:
- 직원 김직원이 직원 앱에 로그인
- 앱이 백그라운드에서 실행 중
- Socket.IO 연결 활성화

**시나리오 단계**:
1. 손님 주문 완료 시 직원 앱에 푸시 알림 즉시 발송
2. 알림 내용: "1번 테이블 새 주문 (#001)"
3. 직원이 알림 터치 → 주문 상세 화면 자동 이동
4. 주문 정보 확인:
   - 테이블: 1번 테이블
   - 메뉴: 아메리카노 2잔, 라떼 1잔
   - 요청사항: "얼음 적게"
   - 총액: 12500원
5. 직원이 "접수" 버튼 클릭 → 상태 "조리중"으로 변경
6. 5분 후 "완료" 버튼 클릭 → 상태 "완료"로 변경
7. 각 상태 변경 시 손님 웹에 실시간 반영

**성공 기준**:
- 주문 발생부터 알림까지 1초 이내
- 앱 백그라운드 상태에서도 알림 수신
- 상태 변경이 손님 화면에 즉시 반영
- 동시 주문 처리 시 누락 없음

### 3.3 시나리오 3: 실시간 메뉴 동기화
**목표**: 사장 메뉴 변경 시 모든 사용자에게 즉시 반영

**사전 조건**:
- 사장이 사장 웹에 로그인
- 손님 A, B가 각각 다른 테이블에서 메뉴 확인 중
- 직원이 직원 앱에서 메뉴 참조 중

**시나리오 단계**:
1. 사장이 웹에서 "아메리카노" 가격을 4000원 → 4200원으로 변경
2. 또는 "라떼"를 일시적으로 품절 처리
3. 변경 즉시 다음 화면들에 자동 반영:
   - 손님 A, B의 메뉴 화면 (새로고침 없이)
   - 직원 앱의 메뉴 정보
   - 이미 담긴 장바구니는 기존 가격 유지
4. 품절 메뉴는 회색 처리 및 선택 불가 상태로 변경

**성공 기준**:
- 사장 변경부터 사용자 화면 반영까지 1초 이내
- 새로고침 없이 자동 업데이트
- 여러 사용자 동시 접속 시에도 모두 동기화
- 장바구니 담긴 기존 항목은 가격 고정

## 4. 비기능 요구사항

### 4.1 성능
- API 응답시간: p95 < 200ms
- 실시간 이벤트 전파: < 1초
- 동시 사용자: 50명까지 안정 동작

### 4.2 안정성
- 주문 생성 멱등성 보장
- 네트워크 재연결 시 상태 복구
- 에러율 < 1%

### 4.3 보안
- JWT 기반 인증/인가
- 매장별 데이터 격리
- 입력값 서버사이드 검증

## 5. 제외 범위 (시간 관계상)
- 결제 연동 (모의 결제만)
- 복잡한 쿠폰/할인 시스템
- 이메일/SMS 알림
- 복잡한 통계/리포트
